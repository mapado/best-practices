---
title: 'ReactJS'
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

Cette liste de bonne pratique est surtout un retour sur certaines "mauvaise pratiques" que nous avons mis dans notre code et comment les corriger.

### Nommage de m√©thodes

Un m√©thode "r√©pondant" √† un √©v√®nement `onSomething` DEVRAIT √™tre pr√©fix√©e par `handle`.

```js {2,8}
class Foo() {
  handleClick() {
    // do something
  }

  render() {
    return (
      <button onClick={this.handleClick}>
        Click
      </button>
    );
  }
}
```

### bind(this) dans la methode `render`

Le binding javascript [n'est pas simple](http://yehudakatz.com/2011/08/11/understanding-javascript-function-invocation-and-this/).

Les nouvelles fonctionnalit√©s d'ECMAScript permettent de se rapprocher des autres langages et de ne plus avoir √† connaitre les "internes", et c'est plut√¥t bien (m√™me si c'est encore mieux de connaitre comment √ßa fonctionne sous le cap√¥t).

Pour cette raison, le `binding` et les appels de m√©thodes DEVRAIENT √™tre le plus "simple" et le plus "logique" pour les d√©butants.

Cela facilite aussi la lisibilit√© et la compr√©hension pour les d√©veloppeurs chevronn√©s.

<Tabs
  defaultValue="good"
  values={[
    { label: 'Pas bien üëé', value: 'bad', },
    { label: 'Bien üëç', value: 'good', },
  ]
}>
<TabItem value="bad">

```js {7}
class Foo extends Component {
  handleClick(foo) {
    // do someting
  }

  render() {
    this.handleClick.bind(this, this.props.foo);

    return <button onClick={this.handleClick}></button>;
  }
}
```

</TabItem>
<TabItem value="good">

```js {5}
class Foo extends Component {
  constructor(props) {
    super(props);

    this.handleClick = this.handleClick.bind(this);
  }

  handleClick() {
    const foo = this.props.foo;
    // do someting
  }

  render() {
    return <button onClick={this.handleClick}></button>;
  }
}
```

</TabItem>
</Tabs>

### Element "classe" : fonctions anonymes dans la methode `render`

De la m√™me mani√®re, on NE DOIT PAS cr√©er des fonctions anonymes dans la m√©thode `render`.

:::note Explications

- Les fonctions anonymes sont reg√©n√©r√©es √† chaque appel de `render`, ce qui consomme de la ressource pour rien.
- Cela rend la m√©thode `render` moins lisible car il y a du code "m√©tier" dans le rendu.

:::

<Tabs
  defaultValue="good"
  values={[
    { label: 'Pas bien üëé', value: 'bad', },
    { label: 'Bien üëç', value: 'good', },
  ]
}>
<TabItem value="bad">

```js {14-16}
class Foo extends PureComponent {
  constructor(props) {
    super(props);

    this.state = {
      foo: null,
    };
  }

  render() {
    return (
      <div>
        <button
          onClick={() => {
            this.setState({ foo: 'bar' });
          }}
        >
          Hey, click-me !
        </button>
      </div>
    );
  }
}
```

</TabItem>
<TabItem value="good">

```js {5,12-16,21}
class Foo extends PureComponent {
  constructor(props) {
    super(props);

    this.handleButtonClick = this.handleButtonClick.bind(this);

    this.state = {
      foo: false,
    };
  }

  handleButtonClick() {
    this.setState((prevState) => ({
      foo: !prevState.foo,
    }));
  }

  render() {
    return (
      <div>
        <button onClick={this.handleButtonClick}>Hey, click-me !</button>
      </div>
    );
  }
}
```

</TabItem>
</Tabs>

#### Exception

La seule exception √©tant si l'on est en train d'it√©rer sur une liste et que l'on doit passer un object en param√®tre.

On DOIT dans tous les cas limiter la fonction anonyme √† un appel d'une autre m√©thode pour la lisibilit√©.

On PEUT alors faire comme √ßa:

```js {20-21}
class Foo extends PureComponent {
  constructor(props) {
    super(props);

    this.handleButtonClick = this.handleButtonClick.bind(this);

    this.state = {
      btnClicked: null,
    };
  }

  handleButtonClick(item) {
    this.setState({
      btnClicked: item,
    });
  }

  render() {
    return (<div>
      {this.props.myList.map(item =>
        <button onClick={(item) => this.handleButtonClick(item)}>
          Hey, click-me !
        </button>
      }
    </div>);
  }
}
```
