(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{144:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return c})),t.d(n,"metadata",(function(){return s})),t.d(n,"rightToc",(function(){return i})),t.d(n,"default",(function(){return p}));var r=t(2),o=t(9),a=(t(0),t(159)),c={title:"React-Redux"},s={id:"js/react-redux",title:"React-Redux",description:'Cette liste de bonne pratique est surtout un retour sur certaines "mauvaise pratiques" que nous avons mis dans notre code et comment les corriger.',source:"@site/docs/js/react-redux.md",permalink:"/best-practices/docs/js/react-redux",editUrl:"https://github.com/mapado/best-practices/edit/master/docs/js/react-redux.md",sidebar:"js",previous:{title:"Redux",permalink:"/best-practices/docs/js/redux"},next:{title:"React Router",permalink:"/best-practices/docs/js/react-router"}},i=[{value:"Injection de composants",id:"injection-de-composants",children:[]}],u={rightToc:i};function p(e){var n=e.components,t=Object(o.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},u,t,{components:n,mdxType:"MDXLayout"}),Object(a.b)("p",null,'Cette liste de bonne pratique est surtout un retour sur certaines "mauvaise pratiques" que nous avons mis dans notre code et comment les corriger.'),Object(a.b)("h3",{id:"injection-de-composants"},"Injection de composants"),Object(a.b)("p",null,"Imaginons que l'on doit injecter un composant diff\xe9rent en fonction du context, par exemple si l'utilisateur est connect\xe9."),Object(a.b)("p",null,'Voici l\'\xe9tat de notre "store" redux:'),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"const store = {\n  [isLogged: boolean]: true,\n  [username?: string]: 'Michel',\n};\n")),Object(a.b)("p",null,"Imaginons que nous ayons un composant ",Object(a.b)("inlineCode",{parentName:"p"},"Layout")," qui doit afficher un composant ",Object(a.b)("inlineCode",{parentName:"p"},"UserInfo")," en fonction de l'\xe9tat de ",Object(a.b)("inlineCode",{parentName:"p"},"isLogged"),"."),Object(a.b)("p",null,"Le composant ",Object(a.b)("inlineCode",{parentName:"p"},"Layout")," NE DEVRAIT PAS d\xe9cider quel composant utiliser mais DEVRAIT utiliser un container redux interm\xe9diaire qui fait ce travail."),Object(a.b)("p",null,"Le contenu du state DEVRAIT \xeatre inject\xe9 au plus pr\xe8s de son utilisation (ex. avec le ",Object(a.b)("inlineCode",{parentName:"p"},"username")," ici)."),Object(a.b)("p",null,"\ud83d\udc4e"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js",metastring:"{12,14,18-19,22-23,27-28}","{12,14,18-19,22-23,27-28}":!0}),"import React from 'react';\nimport { connect } from 'react-redux';\n\nfunction Anonymous() {\n  return (<div>Hello anonymous<div>);\n}\n\nfunction UserInfo({ username }) {\n  return (<div>Hello {username}<div>);\n}\n\nfunction Layout ({ username, UserInfoComponent }) {\n  return (\n    {<UserInfoComponent username={username} />}\n  );\n}\nLayout.propTypes = {\n  UserInfoComponent: React.elementType,\n  username: null,\n};\nLayout.defaultProps = {\n  UserInfoComponent: UserInfo,\n  username: PropTypes.string,\n}\n\nconst mapStateToProps = state => ({\n  username: state.app.username,\n  UserInfoComponent: state.app.isLogged ? UserInfo : Anonymous,\n});\n\nexport default connect(mapStateToProps)(Layout);\n")),Object(a.b)("p",null,"\ud83d\udc4d"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js",metastring:"{9,16-18}","{9,16-18}":!0}),"import React from 'react';\nimport { useSelector } from 'react-redux';\n\nfunction Anonymous() {\n  return (<div>Hello anonymous<div>);\n}\n\nfunction UserInfo() {\n  const username = useSelector(state => state.app.username);\n\n  return (<div>Hello {username}<div>);\n}\n\n// enfin affichons notre composant `Layout`\nfunction Layout() {\n  const isLogged = useSelector(state => state.app.isLogged);\n\n  return isLogged? <UserInfo /> :<Anonymous />;\n}\n")),Object(a.b)("p",null,"C'est d'autant plus simple, lisible et compr\xe9hensible avec les hooks de redux"))}p.isMDXComponent=!0},159:function(e,n,t){"use strict";t.d(n,"a",(function(){return l})),t.d(n,"b",(function(){return b}));var r=t(0),o=t.n(r);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var u=o.a.createContext({}),p=function(e){var n=o.a.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):s({},n,{},e)),t},l=function(e){var n=p(e.components);return o.a.createElement(u.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return o.a.createElement(o.a.Fragment,{},n)}},d=Object(r.forwardRef)((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,c=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),l=p(t),d=r,b=l["".concat(c,".").concat(d)]||l[d]||m[d]||a;return t?o.a.createElement(b,s({ref:n},u,{components:t})):o.a.createElement(b,s({ref:n},u))}));function b(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,c=new Array(a);c[0]=d;var s={};for(var i in n)hasOwnProperty.call(n,i)&&(s[i]=n[i]);s.originalType=e,s.mdxType="string"==typeof e?e:r,c[1]=s;for(var u=2;u<a;u++)c[u]=t[u];return o.a.createElement.apply(null,c)}return o.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"}}]);